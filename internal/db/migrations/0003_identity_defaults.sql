-- 0003_identity_defaults.sql
-- Milestone 6: ensure primary keys have defaults where code inserts without IDs.

-- owned_ships.id is inserted without specifying an id.
ALTER TABLE owned_ships
  ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY;

-- mails.id / mail_attachments.id are inserted without specifying IDs.
ALTER TABLE mails
  ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY;

ALTER TABLE mail_attachments
  ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY;

-- builds.id is inserted without specifying an id.
ALTER TABLE builds
  ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY;
