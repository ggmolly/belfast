// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: ships.sql

package gen

import (
	"context"

	"github.com/jackc/pgx/v5/pgconn"
	"github.com/jackc/pgx/v5/pgtype"
)

const countShipByTemplateID = `-- name: CountShipByTemplateID :one
SELECT COUNT(*)::bigint
FROM ships
WHERE template_id = $1
`

func (q *Queries) CountShipByTemplateID(ctx context.Context, templateID int64) (int64, error) {
	row := q.db.QueryRow(ctx, countShipByTemplateID, templateID)
	var column_1 int64
	err := row.Scan(&column_1)
	return column_1, err
}

const deleteShip = `-- name: DeleteShip :execresult
DELETE FROM ships
WHERE template_id = $1
`

func (q *Queries) DeleteShip(ctx context.Context, templateID int64) (pgconn.CommandTag, error) {
	return q.db.Exec(ctx, deleteShip, templateID)
}

const getRandomPoolShip = `-- name: GetRandomPoolShip :one
SELECT template_id, name, english_name, rarity_id, star, type, nationality, build_time, pool_id
FROM ships
WHERE pool_id = $1
  AND rarity_id = $2
ORDER BY RANDOM()
LIMIT 1
`

type GetRandomPoolShipParams struct {
	PoolID   pgtype.Int8
	RarityID int64
}

func (q *Queries) GetRandomPoolShip(ctx context.Context, arg GetRandomPoolShipParams) (Ship, error) {
	row := q.db.QueryRow(ctx, getRandomPoolShip, arg.PoolID, arg.RarityID)
	var i Ship
	err := row.Scan(
		&i.TemplateID,
		&i.Name,
		&i.EnglishName,
		&i.RarityID,
		&i.Star,
		&i.Type,
		&i.Nationality,
		&i.BuildTime,
		&i.PoolID,
	)
	return i, err
}

const getShip = `-- name: GetShip :one
SELECT template_id, name, english_name, rarity_id, star, type, nationality, build_time, pool_id
FROM ships
WHERE template_id = $1
`

func (q *Queries) GetShip(ctx context.Context, templateID int64) (Ship, error) {
	row := q.db.QueryRow(ctx, getShip, templateID)
	var i Ship
	err := row.Scan(
		&i.TemplateID,
		&i.Name,
		&i.EnglishName,
		&i.RarityID,
		&i.Star,
		&i.Type,
		&i.Nationality,
		&i.BuildTime,
		&i.PoolID,
	)
	return i, err
}

const upsertShipRecord = `-- name: UpsertShipRecord :exec

INSERT INTO ships (
  template_id,
  name,
  english_name,
  rarity_id,
  star,
  type,
  nationality,
  build_time,
  pool_id
) VALUES (
  $1, $2, $3, $4, $5, $6, $7, $8, $9
)
ON CONFLICT (template_id)
DO UPDATE SET
  name = EXCLUDED.name,
  english_name = EXCLUDED.english_name,
  rarity_id = EXCLUDED.rarity_id,
  star = EXCLUDED.star,
  type = EXCLUDED.type,
  nationality = EXCLUDED.nationality,
  build_time = EXCLUDED.build_time,
  pool_id = EXCLUDED.pool_id
`

type UpsertShipRecordParams struct {
	TemplateID  int64
	Name        string
	EnglishName string
	RarityID    int64
	Star        int64
	Type        int64
	Nationality int64
	BuildTime   int64
	PoolID      pgtype.Int8
}

// Ship queries
func (q *Queries) UpsertShipRecord(ctx context.Context, arg UpsertShipRecordParams) error {
	_, err := q.db.Exec(ctx, upsertShipRecord,
		arg.TemplateID,
		arg.Name,
		arg.EnglishName,
		arg.RarityID,
		arg.Star,
		arg.Type,
		arg.Nationality,
		arg.BuildTime,
		arg.PoolID,
	)
	return err
}
