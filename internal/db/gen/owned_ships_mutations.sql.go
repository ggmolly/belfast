// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: owned_ships_mutations.sql

package gen

import (
	"context"

	"github.com/jackc/pgx/v5/pgconn"
	"github.com/jackc/pgx/v5/pgtype"
)

const clearOwnedShipSecretariesByOwnerID = `-- name: ClearOwnedShipSecretariesByOwnerID :exec
UPDATE owned_ships
SET is_secretary = false,
    secretary_position = NULL,
    secretary_phantom_id = 0
WHERE owner_id = $1
  AND deleted_at IS NULL
  AND is_secretary = true
`

func (q *Queries) ClearOwnedShipSecretariesByOwnerID(ctx context.Context, ownerID int64) error {
	_, err := q.db.Exec(ctx, clearOwnedShipSecretariesByOwnerID, ownerID)
	return err
}

const createOwnedShip = `-- name: CreateOwnedShip :one

INSERT INTO owned_ships (
  owner_id,
  ship_id
) VALUES (
  $1, $2
)
RETURNING id, create_time, change_name_timestamp
`

type CreateOwnedShipParams struct {
	OwnerID int64
	ShipID  int64
}

type CreateOwnedShipRow struct {
	ID                  int64
	CreateTime          pgtype.Timestamptz
	ChangeNameTimestamp pgtype.Timestamptz
}

// Owned ship mutation queries
func (q *Queries) CreateOwnedShip(ctx context.Context, arg CreateOwnedShipParams) (CreateOwnedShipRow, error) {
	row := q.db.QueryRow(ctx, createOwnedShip, arg.OwnerID, arg.ShipID)
	var i CreateOwnedShipRow
	err := row.Scan(&i.ID, &i.CreateTime, &i.ChangeNameTimestamp)
	return i, err
}

const deleteOwnedShipsByOwnerAndIDs = `-- name: DeleteOwnedShipsByOwnerAndIDs :exec
DELETE FROM owned_ships
WHERE owner_id = $1
  AND id = ANY($2::bigint[])
`

type DeleteOwnedShipsByOwnerAndIDsParams struct {
	OwnerID int64
	Column2 []int64
}

func (q *Queries) DeleteOwnedShipsByOwnerAndIDs(ctx context.Context, arg DeleteOwnedShipsByOwnerAndIDsParams) error {
	_, err := q.db.Exec(ctx, deleteOwnedShipsByOwnerAndIDs, arg.OwnerID, arg.Column2)
	return err
}

const setOwnedShipSecretary = `-- name: SetOwnedShipSecretary :exec
UPDATE owned_ships
SET is_secretary = true,
    secretary_position = $3,
    secretary_phantom_id = $4
WHERE owner_id = $1
  AND id = $2
  AND deleted_at IS NULL
`

type SetOwnedShipSecretaryParams struct {
	OwnerID            int64
	ID                 int64
	SecretaryPosition  pgtype.Int8
	SecretaryPhantomID int64
}

func (q *Queries) SetOwnedShipSecretary(ctx context.Context, arg SetOwnedShipSecretaryParams) error {
	_, err := q.db.Exec(ctx, setOwnedShipSecretary,
		arg.OwnerID,
		arg.ID,
		arg.SecretaryPosition,
		arg.SecretaryPhantomID,
	)
	return err
}

const softDeleteOwnedShip = `-- name: SoftDeleteOwnedShip :execresult
UPDATE owned_ships
SET deleted_at = CURRENT_TIMESTAMP
WHERE owner_id = $1
  AND id = $2
  AND deleted_at IS NULL
`

type SoftDeleteOwnedShipParams struct {
	OwnerID int64
	ID      int64
}

func (q *Queries) SoftDeleteOwnedShip(ctx context.Context, arg SoftDeleteOwnedShipParams) (pgconn.CommandTag, error) {
	return q.db.Exec(ctx, softDeleteOwnedShip, arg.OwnerID, arg.ID)
}

const updateOwnedShip = `-- name: UpdateOwnedShip :execresult
UPDATE owned_ships
SET
  level = $3,
  exp = $4,
  surplus_exp = $5,
  max_level = $6,
  intimacy = $7,
  is_locked = $8,
  propose = $9,
  common_flag = $10,
  blueprint_flag = $11,
  proficiency = $12,
  activity_npc = $13,
  custom_name = $14,
  change_name_timestamp = $15,
  create_time = $16,
  energy = $17,
  state = $18,
  state_info1 = $19,
  state_info2 = $20,
  state_info3 = $21,
  state_info4 = $22,
  skin_id = $23,
  is_secretary = $24,
  secretary_position = $25,
  secretary_phantom_id = $26,
  deleted_at = $27
WHERE owner_id = $1
  AND id = $2
`

type UpdateOwnedShipParams struct {
	OwnerID             int64
	ID                  int64
	Level               int64
	Exp                 int64
	SurplusExp          int64
	MaxLevel            int64
	Intimacy            int64
	IsLocked            bool
	Propose             bool
	CommonFlag          bool
	BlueprintFlag       bool
	Proficiency         bool
	ActivityNpc         int64
	CustomName          string
	ChangeNameTimestamp pgtype.Timestamptz
	CreateTime          pgtype.Timestamptz
	Energy              int64
	State               int64
	StateInfo1          int64
	StateInfo2          int64
	StateInfo3          int64
	StateInfo4          int64
	SkinID              int64
	IsSecretary         bool
	SecretaryPosition   pgtype.Int8
	SecretaryPhantomID  int64
	DeletedAt           pgtype.Timestamptz
}

func (q *Queries) UpdateOwnedShip(ctx context.Context, arg UpdateOwnedShipParams) (pgconn.CommandTag, error) {
	return q.db.Exec(ctx, updateOwnedShip,
		arg.OwnerID,
		arg.ID,
		arg.Level,
		arg.Exp,
		arg.SurplusExp,
		arg.MaxLevel,
		arg.Intimacy,
		arg.IsLocked,
		arg.Propose,
		arg.CommonFlag,
		arg.BlueprintFlag,
		arg.Proficiency,
		arg.ActivityNpc,
		arg.CustomName,
		arg.ChangeNameTimestamp,
		arg.CreateTime,
		arg.Energy,
		arg.State,
		arg.StateInfo1,
		arg.StateInfo2,
		arg.StateInfo3,
		arg.StateInfo4,
		arg.SkinID,
		arg.IsSecretary,
		arg.SecretaryPosition,
		arg.SecretaryPhantomID,
		arg.DeletedAt,
	)
}

const upsertOwnedShipEquipmentDefault = `-- name: UpsertOwnedShipEquipmentDefault :exec
INSERT INTO owned_ship_equipments (
  owner_id,
  ship_id,
  pos,
  equip_id,
  skin_id
) VALUES (
  $1, $2, $3, $4, $5
)
ON CONFLICT (owner_id, ship_id, pos)
DO NOTHING
`

type UpsertOwnedShipEquipmentDefaultParams struct {
	OwnerID int64
	ShipID  int64
	Pos     int64
	EquipID int64
	SkinID  int64
}

func (q *Queries) UpsertOwnedShipEquipmentDefault(ctx context.Context, arg UpsertOwnedShipEquipmentDefaultParams) error {
	_, err := q.db.Exec(ctx, upsertOwnedShipEquipmentDefault,
		arg.OwnerID,
		arg.ShipID,
		arg.Pos,
		arg.EquipID,
		arg.SkinID,
	)
	return err
}
