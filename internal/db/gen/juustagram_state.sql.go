// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: juustagram_state.sql

package gen

import (
	"context"

	"github.com/jackc/pgx/v5/pgconn"
	"github.com/jackc/pgx/v5/pgtype"
)

const countJuustagramGroupsByCommander = `-- name: CountJuustagramGroupsByCommander :one

SELECT COUNT(*)::bigint
FROM juustagram_groups
WHERE commander_id = $1
`

// Juustagram state queries
func (q *Queries) CountJuustagramGroupsByCommander(ctx context.Context, commanderID int64) (int64, error) {
	row := q.db.QueryRow(ctx, countJuustagramGroupsByCommander, commanderID)
	var column_1 int64
	err := row.Scan(&column_1)
	return column_1, err
}

const createJuustagramChatGroup = `-- name: CreateJuustagramChatGroup :one
INSERT INTO juustagram_chat_groups (
  commander_id,
  group_record_id,
  chat_group_id,
  op_time,
  read_flag
) VALUES (
  $1, $2, $3, $4, $5
)
RETURNING id
`

type CreateJuustagramChatGroupParams struct {
	CommanderID   int64
	GroupRecordID int64
	ChatGroupID   int64
	OpTime        int64
	ReadFlag      int64
}

func (q *Queries) CreateJuustagramChatGroup(ctx context.Context, arg CreateJuustagramChatGroupParams) (int64, error) {
	row := q.db.QueryRow(ctx, createJuustagramChatGroup,
		arg.CommanderID,
		arg.GroupRecordID,
		arg.ChatGroupID,
		arg.OpTime,
		arg.ReadFlag,
	)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const createJuustagramGroup = `-- name: CreateJuustagramGroup :one
INSERT INTO juustagram_groups (
  commander_id,
  group_id,
  skin_id,
  favorite,
  cur_chat_group
) VALUES (
  $1, $2, $3, $4, $5
)
RETURNING id
`

type CreateJuustagramGroupParams struct {
	CommanderID  int64
	GroupID      int64
	SkinID       int64
	Favorite     int64
	CurChatGroup int64
}

func (q *Queries) CreateJuustagramGroup(ctx context.Context, arg CreateJuustagramGroupParams) (int64, error) {
	row := q.db.QueryRow(ctx, createJuustagramGroup,
		arg.CommanderID,
		arg.GroupID,
		arg.SkinID,
		arg.Favorite,
		arg.CurChatGroup,
	)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const createJuustagramReply = `-- name: CreateJuustagramReply :one
INSERT INTO juustagram_replies (
  chat_group_record_id,
  sequence,
  key,
  value
) VALUES (
  $1, $2, $3, $4
)
RETURNING id
`

type CreateJuustagramReplyParams struct {
	ChatGroupRecordID int64
	Sequence          int64
	Key               int64
	Value             int64
}

func (q *Queries) CreateJuustagramReply(ctx context.Context, arg CreateJuustagramReplyParams) (int64, error) {
	row := q.db.QueryRow(ctx, createJuustagramReply,
		arg.ChatGroupRecordID,
		arg.Sequence,
		arg.Key,
		arg.Value,
	)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const getJuustagramChatGroupByCommanderAndChatGroupID = `-- name: GetJuustagramChatGroupByCommanderAndChatGroupID :one
SELECT id, commander_id, group_record_id, chat_group_id, op_time, read_flag
FROM juustagram_chat_groups
WHERE commander_id = $1
  AND chat_group_id = $2
`

type GetJuustagramChatGroupByCommanderAndChatGroupIDParams struct {
	CommanderID int64
	ChatGroupID int64
}

func (q *Queries) GetJuustagramChatGroupByCommanderAndChatGroupID(ctx context.Context, arg GetJuustagramChatGroupByCommanderAndChatGroupIDParams) (JuustagramChatGroup, error) {
	row := q.db.QueryRow(ctx, getJuustagramChatGroupByCommanderAndChatGroupID, arg.CommanderID, arg.ChatGroupID)
	var i JuustagramChatGroup
	err := row.Scan(
		&i.ID,
		&i.CommanderID,
		&i.GroupRecordID,
		&i.ChatGroupID,
		&i.OpTime,
		&i.ReadFlag,
	)
	return i, err
}

const getJuustagramGroupByCommanderAndGroupID = `-- name: GetJuustagramGroupByCommanderAndGroupID :one
SELECT id, commander_id, group_id, skin_id, favorite, cur_chat_group
FROM juustagram_groups
WHERE commander_id = $1
  AND group_id = $2
`

type GetJuustagramGroupByCommanderAndGroupIDParams struct {
	CommanderID int64
	GroupID     int64
}

func (q *Queries) GetJuustagramGroupByCommanderAndGroupID(ctx context.Context, arg GetJuustagramGroupByCommanderAndGroupIDParams) (JuustagramGroup, error) {
	row := q.db.QueryRow(ctx, getJuustagramGroupByCommanderAndGroupID, arg.CommanderID, arg.GroupID)
	var i JuustagramGroup
	err := row.Scan(
		&i.ID,
		&i.CommanderID,
		&i.GroupID,
		&i.SkinID,
		&i.Favorite,
		&i.CurChatGroup,
	)
	return i, err
}

const getMaxJuustagramReplySequence = `-- name: GetMaxJuustagramReplySequence :one
SELECT COALESCE(MAX(sequence), 0)::bigint
FROM juustagram_replies
WHERE chat_group_record_id = $1
`

func (q *Queries) GetMaxJuustagramReplySequence(ctx context.Context, chatGroupRecordID int64) (int64, error) {
	row := q.db.QueryRow(ctx, getMaxJuustagramReplySequence, chatGroupRecordID)
	var column_1 int64
	err := row.Scan(&column_1)
	return column_1, err
}

const listJuustagramChatGroupsByGroupRecordIDs = `-- name: ListJuustagramChatGroupsByGroupRecordIDs :many
SELECT id, commander_id, group_record_id, chat_group_id, op_time, read_flag
FROM juustagram_chat_groups
WHERE commander_id = $1
  AND group_record_id = ANY($2::bigint[])
ORDER BY chat_group_id ASC
`

type ListJuustagramChatGroupsByGroupRecordIDsParams struct {
	CommanderID int64
	Column2     []int64
}

func (q *Queries) ListJuustagramChatGroupsByGroupRecordIDs(ctx context.Context, arg ListJuustagramChatGroupsByGroupRecordIDsParams) ([]JuustagramChatGroup, error) {
	rows, err := q.db.Query(ctx, listJuustagramChatGroupsByGroupRecordIDs, arg.CommanderID, arg.Column2)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []JuustagramChatGroup
	for rows.Next() {
		var i JuustagramChatGroup
		if err := rows.Scan(
			&i.ID,
			&i.CommanderID,
			&i.GroupRecordID,
			&i.ChatGroupID,
			&i.OpTime,
			&i.ReadFlag,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listJuustagramGroups = `-- name: ListJuustagramGroups :many
SELECT id, commander_id, group_id, skin_id, favorite, cur_chat_group
FROM juustagram_groups
WHERE commander_id = $1
ORDER BY group_id ASC
`

func (q *Queries) ListJuustagramGroups(ctx context.Context, commanderID int64) ([]JuustagramGroup, error) {
	rows, err := q.db.Query(ctx, listJuustagramGroups, commanderID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []JuustagramGroup
	for rows.Next() {
		var i JuustagramGroup
		if err := rows.Scan(
			&i.ID,
			&i.CommanderID,
			&i.GroupID,
			&i.SkinID,
			&i.Favorite,
			&i.CurChatGroup,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listJuustagramGroupsByCommanderPaged = `-- name: ListJuustagramGroupsByCommanderPaged :many
SELECT id, commander_id, group_id, skin_id, favorite, cur_chat_group
FROM juustagram_groups
WHERE commander_id = $1
ORDER BY group_id ASC
OFFSET $2
LIMIT $3
`

type ListJuustagramGroupsByCommanderPagedParams struct {
	CommanderID int64
	Offset      int32
	Limit       int32
}

func (q *Queries) ListJuustagramGroupsByCommanderPaged(ctx context.Context, arg ListJuustagramGroupsByCommanderPagedParams) ([]JuustagramGroup, error) {
	rows, err := q.db.Query(ctx, listJuustagramGroupsByCommanderPaged, arg.CommanderID, arg.Offset, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []JuustagramGroup
	for rows.Next() {
		var i JuustagramGroup
		if err := rows.Scan(
			&i.ID,
			&i.CommanderID,
			&i.GroupID,
			&i.SkinID,
			&i.Favorite,
			&i.CurChatGroup,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listJuustagramRepliesByChatGroupRecordIDs = `-- name: ListJuustagramRepliesByChatGroupRecordIDs :many
SELECT id, chat_group_record_id, sequence, key, value
FROM juustagram_replies
WHERE chat_group_record_id = ANY($1::bigint[])
ORDER BY chat_group_record_id ASC, sequence ASC
`

func (q *Queries) ListJuustagramRepliesByChatGroupRecordIDs(ctx context.Context, dollar_1 []int64) ([]JuustagramReply, error) {
	rows, err := q.db.Query(ctx, listJuustagramRepliesByChatGroupRecordIDs, dollar_1)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []JuustagramReply
	for rows.Next() {
		var i JuustagramReply
		if err := rows.Scan(
			&i.ID,
			&i.ChatGroupRecordID,
			&i.Sequence,
			&i.Key,
			&i.Value,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const markAllJuustagramChatGroupsRead = `-- name: MarkAllJuustagramChatGroupsRead :exec
UPDATE juustagram_chat_groups
SET read_flag = 1
WHERE commander_id = $1
`

func (q *Queries) MarkAllJuustagramChatGroupsRead(ctx context.Context, commanderID int64) error {
	_, err := q.db.Exec(ctx, markAllJuustagramChatGroupsRead, commanderID)
	return err
}

const markJuustagramChatGroupsRead = `-- name: MarkJuustagramChatGroupsRead :exec
UPDATE juustagram_chat_groups
SET read_flag = 1
WHERE commander_id = $1
  AND chat_group_id = ANY($2::bigint[])
`

type MarkJuustagramChatGroupsReadParams struct {
	CommanderID int64
	Column2     []int64
}

func (q *Queries) MarkJuustagramChatGroupsRead(ctx context.Context, arg MarkJuustagramChatGroupsReadParams) error {
	_, err := q.db.Exec(ctx, markJuustagramChatGroupsRead, arg.CommanderID, arg.Column2)
	return err
}

const updateJuustagramChatGroupOpTimeReadFlag = `-- name: UpdateJuustagramChatGroupOpTimeReadFlag :exec
UPDATE juustagram_chat_groups
SET op_time = $3,
    read_flag = $4
WHERE id = $1
  AND commander_id = $2
`

type UpdateJuustagramChatGroupOpTimeReadFlagParams struct {
	ID          int64
	CommanderID int64
	OpTime      int64
	ReadFlag    int64
}

func (q *Queries) UpdateJuustagramChatGroupOpTimeReadFlag(ctx context.Context, arg UpdateJuustagramChatGroupOpTimeReadFlagParams) error {
	_, err := q.db.Exec(ctx, updateJuustagramChatGroupOpTimeReadFlag,
		arg.ID,
		arg.CommanderID,
		arg.OpTime,
		arg.ReadFlag,
	)
	return err
}

const updateJuustagramGroup = `-- name: UpdateJuustagramGroup :execresult
UPDATE juustagram_groups
SET
  skin_id = COALESCE($1, skin_id),
  favorite = COALESCE($2, favorite),
  cur_chat_group = COALESCE($3, cur_chat_group)
WHERE commander_id = $4
  AND group_id = $5
`

type UpdateJuustagramGroupParams struct {
	SkinID       pgtype.Int8
	Favorite     pgtype.Int8
	CurChatGroup pgtype.Int8
	CommanderID  int64
	GroupID      int64
}

func (q *Queries) UpdateJuustagramGroup(ctx context.Context, arg UpdateJuustagramGroupParams) (pgconn.CommandTag, error) {
	return q.db.Exec(ctx, updateJuustagramGroup,
		arg.SkinID,
		arg.Favorite,
		arg.CurChatGroup,
		arg.CommanderID,
		arg.GroupID,
	)
}

const updateJuustagramGroupCurrentChatGroupByID = `-- name: UpdateJuustagramGroupCurrentChatGroupByID :exec
UPDATE juustagram_groups
SET cur_chat_group = $3
WHERE id = $1
  AND commander_id = $2
`

type UpdateJuustagramGroupCurrentChatGroupByIDParams struct {
	ID           int64
	CommanderID  int64
	CurChatGroup int64
}

func (q *Queries) UpdateJuustagramGroupCurrentChatGroupByID(ctx context.Context, arg UpdateJuustagramGroupCurrentChatGroupByIDParams) error {
	_, err := q.db.Exec(ctx, updateJuustagramGroupCurrentChatGroupByID, arg.ID, arg.CommanderID, arg.CurChatGroup)
	return err
}
