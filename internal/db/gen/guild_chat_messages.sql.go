// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: guild_chat_messages.sql

package gen

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createGuildChatMessage = `-- name: CreateGuildChatMessage :one

INSERT INTO guild_chat_messages (
  guild_id,
  sender_id,
  sent_at,
  content
) VALUES (
  $1, $2, $3, $4
)
RETURNING id
`

type CreateGuildChatMessageParams struct {
	GuildID  int64
	SenderID int64
	SentAt   pgtype.Timestamptz
	Content  string
}

// Guild chat queries
func (q *Queries) CreateGuildChatMessage(ctx context.Context, arg CreateGuildChatMessageParams) (int64, error) {
	row := q.db.QueryRow(ctx, createGuildChatMessage,
		arg.GuildID,
		arg.SenderID,
		arg.SentAt,
		arg.Content,
	)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const listGuildChatMessages = `-- name: ListGuildChatMessages :many
SELECT
  m.id,
  m.guild_id,
  m.sender_id,
  m.sent_at,
  m.content,
  c.commander_id AS sender_commander_id,
  c.name AS sender_name,
  c.level AS sender_level,
  c.display_icon_id AS sender_display_icon_id,
  c.display_skin_id AS sender_display_skin_id,
  c.selected_icon_frame_id AS sender_selected_icon_frame_id,
  c.selected_chat_frame_id AS sender_selected_chat_frame_id,
  c.display_icon_theme_id AS sender_display_icon_theme_id
FROM guild_chat_messages m
JOIN commanders c ON c.commander_id = m.sender_id
WHERE m.guild_id = $1
ORDER BY m.sent_at DESC
LIMIT $2
`

type ListGuildChatMessagesParams struct {
	GuildID int64
	Limit   int32
}

type ListGuildChatMessagesRow struct {
	ID                        int64
	GuildID                   int64
	SenderID                  int64
	SentAt                    pgtype.Timestamptz
	Content                   string
	SenderCommanderID         int64
	SenderName                string
	SenderLevel               int32
	SenderDisplayIconID       int64
	SenderDisplaySkinID       int64
	SenderSelectedIconFrameID int64
	SenderSelectedChatFrameID int64
	SenderDisplayIconThemeID  int64
}

func (q *Queries) ListGuildChatMessages(ctx context.Context, arg ListGuildChatMessagesParams) ([]ListGuildChatMessagesRow, error) {
	rows, err := q.db.Query(ctx, listGuildChatMessages, arg.GuildID, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListGuildChatMessagesRow
	for rows.Next() {
		var i ListGuildChatMessagesRow
		if err := rows.Scan(
			&i.ID,
			&i.GuildID,
			&i.SenderID,
			&i.SentAt,
			&i.Content,
			&i.SenderCommanderID,
			&i.SenderName,
			&i.SenderLevel,
			&i.SenderDisplayIconID,
			&i.SenderDisplaySkinID,
			&i.SenderSelectedIconFrameID,
			&i.SenderSelectedChatFrameID,
			&i.SenderDisplayIconThemeID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listGuildChatMessagesAll = `-- name: ListGuildChatMessagesAll :many
SELECT
  m.id,
  m.guild_id,
  m.sender_id,
  m.sent_at,
  m.content,
  c.commander_id AS sender_commander_id,
  c.name AS sender_name,
  c.level AS sender_level,
  c.display_icon_id AS sender_display_icon_id,
  c.display_skin_id AS sender_display_skin_id,
  c.selected_icon_frame_id AS sender_selected_icon_frame_id,
  c.selected_chat_frame_id AS sender_selected_chat_frame_id,
  c.display_icon_theme_id AS sender_display_icon_theme_id
FROM guild_chat_messages m
JOIN commanders c ON c.commander_id = m.sender_id
WHERE m.guild_id = $1
ORDER BY m.sent_at DESC
`

type ListGuildChatMessagesAllRow struct {
	ID                        int64
	GuildID                   int64
	SenderID                  int64
	SentAt                    pgtype.Timestamptz
	Content                   string
	SenderCommanderID         int64
	SenderName                string
	SenderLevel               int32
	SenderDisplayIconID       int64
	SenderDisplaySkinID       int64
	SenderSelectedIconFrameID int64
	SenderSelectedChatFrameID int64
	SenderDisplayIconThemeID  int64
}

func (q *Queries) ListGuildChatMessagesAll(ctx context.Context, guildID int64) ([]ListGuildChatMessagesAllRow, error) {
	rows, err := q.db.Query(ctx, listGuildChatMessagesAll, guildID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListGuildChatMessagesAllRow
	for rows.Next() {
		var i ListGuildChatMessagesAllRow
		if err := rows.Scan(
			&i.ID,
			&i.GuildID,
			&i.SenderID,
			&i.SentAt,
			&i.Content,
			&i.SenderCommanderID,
			&i.SenderName,
			&i.SenderLevel,
			&i.SenderDisplayIconID,
			&i.SenderDisplaySkinID,
			&i.SenderSelectedIconFrameID,
			&i.SenderSelectedChatFrameID,
			&i.SenderDisplayIconThemeID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
